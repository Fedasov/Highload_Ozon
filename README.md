# Highload_Ozon
Расчетно-пояснительная записка к курсовой работе по дисциплине "Проектирование высоконагруженных систем"
Образовательный центр VK x МГТУ им.Н.Э.Баумана (ex. "Технопарк")

# 1. Тема и целевая аудитория
Маркетплейс Ozon - платформа, на которой продавцы могут размещать свои товары для продажи, а покупатели — приобретать их. Маркетплейс имеет широкий ассортимент товаров и предлагают удобные условия для покупки.

## Определение функционала MVP
1. Регистрация и авторизация пользователей.
2. Поиск товаров по ключевым словам.
3. Просмотр информации о товарах, включая описание, характеристики, цены и отзывы.
4. Добавление товара в корзину
5. Редактирование списка в корзине товаров.
6. Выбор пункта доставки
7. Оформление заказа
8. Выложить товар на продажу (продавец)
9. Трэккинг посылок

## Целевая аудитория
Аудитория сайта достаточно широкая и разнообразная, но, преобладающее большинство мужчины. [[1]](https://pro.similarweb.com/#/digitalsuite/websiteanalysis/overview/website-performance/*/999/1m?webSource=Total&key=ozon.ru)<br/>
Размер целевой аудитории: 58.6 млн. пользователей в месяц, 21.0 млн. пользователей в день на момент февраля 2024г. [[2]](https://oborot.ru/news/kolichestvo-posetitelej-marketplejsov-wildberries-i-ozon-v-mesyac-sravnyalos-kuda-eshhe-hodyat-pokupateli-i209527.html)<br/>
**Гендерное распределение** <br/>
![image](https://github.com/user-attachments/assets/db8cdb6b-4a8a-41ae-8423-773567d775a7)

**Возрастное распределение** <br/>
![image](https://github.com/user-attachments/assets/f075a9e7-6acb-4549-8c87-607d4c9db085)

**География аудитории иаркетплейс Ozon**<br/>
![image](https://github.com/user-attachments/assets/3cf9a9bf-cbb0-4cc5-adda-bc057ae872ff)
Можно сделать следующие выводы: 
* Преобладающее большинство пользователей мужчины
* Доминирующий возраст 25-34 года
* 95% пользователей из России

# 2. Расчёт нагрузки

## Продуктовые метрики

Метрика      | Значение
-------------| -------------
Месячная аудитория MAU        | 58.6 млн. пользователей
Дневная аудитория DAU         | 21.0 млн. пользователей
Количество регистраций в день [[3]](https://adindex.ru/news/researches/2023/02/28/310879.phtml) | 40 тыс. пользователей
Средняя длительность сессии   [[4]](https://dzen.ru/a/ZkT8wKCKkBgtJMT-) | 11 минут

### Хранилище данных для пользователя

Параметр          | Число
-------------| -------------
Поиск товаров по ключевым словам           | 3 запросов/день
Просмотр информации о товарах              | 12 запросов/день
Добавление товаров в корзину               | 4 товаров/день
Редактирование списка в корзине товаров    | 1 запросов/день
Выбор пункта доставки                      | 1 запрос/день
Оформление заказа                          | 1 заказов/день
Среднее количество товаров в заказе        | 3 товаров
Добавление товаров продавцом               | 1 товаров/день
Средний размер товара без учета фотографии | 6.3 кБ
Средний количество фотографий у товара     | 7 шт.
Средний размер фотографии товара           | 86 кБ
Трэккинг посылок                           | 1 запросов/день

Объём данных на одного пользователя в день:
* Добавление товаров в корзину: 4 товара * (6.3 кБ + 7 * 86 кБ) = 2461.2 кБ
* Оформление заказа: 3 товара * (6.3 кБ + 7 * 86 кБ) = 1845.9 кБ
* Трэккинг посылок: 1 запрос/день * (6.3 кБ + 86 кБ) = 92.3 кБ

Тогда общий объем товаров в день, добавляемых в корзину, оформленых в заказе, трэкинг посылок, на одного пользователя равен:
4 * (6.3 (кБ) + 7 * 86 (кБ)) + 3 * (6.3 (кБ) + 7 * 86 (кБ)) + 1 * (6.3 (кБ) + 86 (кБ)) = 4405.4 кБ = 4.4МБ

Объём данных на одного продавца в день:
* Добавление товаров продавцом: 1 товаров/день * (6.3 кБ + 7 * 86 кБ) = 608.3 кБ

### Динамический рост

Так как общее количество заказов около 966 млн. [[5]](https://oborot.ru/news/oborot-sellerov-na-ozon-vyros-v-23-raza-skolko-u-marketplejsa-vyruchki-prodavcov-pokupatelej-i-zakazov-na-nachalo-2024-goda-i211081.html) товаров, то можно вычислить, какой объем данных будет занят пользователями:
* Расчёт данных на товары (всего): (6.3 (кБ) + 7 * 86 (кБ)) * 966 млн. = 587.62 ТБ
* Расчёт данных только на фотографии товаров: 7 * 86 (кБ) * 618 млн. = 581.53 ТБ

### Сетевой трафик
При расчете сетевого трафика не будем учитывать запросы, связанные с регистрацией пользователей, так как они не создают ощутимую нагрузку на наш сервис.
Основная нагрузка приходится на оформление заказа, добавление в корзину, добавление товаров продавцом и трэкинг посылок.

### Предварительные расчеты:
### Трафик по видам активности на одного пользователя:
1. Поиск товаров:

* 3 запроса/день. Примерный объем одного запроса можно оценить в 10 кБ (запрос + ответ от сервера). Итого: 3 ∗ 10 кБ = 30 кБ

2. Добавление товаров в корзину:

* 4 товара/день. Объем данных на один товар — 6.3 кБ + 7 фото * 86 кБ = 2461.2 кБ (как уже рассчитано). Итого: 2461.2 кБ

3. Оформление заказа:

* 1 заказ в день с 3 товарами. Итого: 3 товара * (6.3 кБ + 7 * 86 кБ) = 1845.9 кБ

4. Трэккинг посылок:

* 1 запрос/день. Примерный объем одного запроса можно оценить в 10 кБ (запрос + ответ от сервера). Итого: 1 * 10 = 10 кБ

5. Добавление товаров продавцом:

* 1 товаров/день. Примерный объем одного запроса можно оценить в 1 товаров/день * (6.3 кБ + 7 * 86 кБ) = 608.3 кБ (как уже рассчитано). Итого: 608.3 кБ

6. Трафик на одного пользователя в день:

* 30 кБ + 2461.2 кБ + 1845.9 кБ + 10 кБ = 4347.1 кБ ≈ 4.3 МБ

### Сетевой трафик по видам активности (дневная аудитория 21.0 млн. пользователей):

Пиковое значение активности пользователей(соответственно RPS тоже) приблизительно в 3 раза выше среднего значения. Возьмем коэффициент запаса равный 4

Тип                           | Отправка (дневная аудитория 21.0 млн ппокупателей и 400 тыс продавцов [[6]](https://seller.ozon.ru/media/boost/kak-izmenilsya-biznes-portret-prodavca-ozon-v-2023-godu/)) | Отправка Гб/сек    | Пиковое значение   | Значение с коэффициентом запаса 2 |
-------------                 |--------------------------------------------------------------------------------|--------------------|--------------------|-----------------------------------|
Поиск товаров                 | 21.0 млн * 30 кБ = 630 ГБ                                                      | 0.0073             | 0.0219             | 0.0292                            |
Добавление товаров в корзину  | 21.0 млн * 2461.2 кБ = 51 685 ГБ                                               | 0.598              | 1.794              | 2.392                             |
Оформление заказа             | 21.0 млн * 1845.9 кБ = 38 764 ГБ                                               | 0.449              | 1.347              | 1.796                             |
Трэккинг посылок              | 21.0 млн * 10 кБ = 210 ГБ                                                      | 0.002              | 0.006              | 0.008                             |
Добавление товаров продавцом  | 400 тыс * 608.3 кБ = 243 ГБ                                                    | 0.003              | 0.009              | 0.012                             |
Итого                         | Покупатель: 91 289 ГБ ≈ 91 ТБ  <br/>  Продавец: 243 ГБ                         | 1.0566 <br/> 0.003 | 3.17 <br/> 0.009   | 4.23 <br/> 0.012                   |

### RPS

* Поиск товаров: 21.0 млн * 3 / 86400 = 729 RPS
* Добавление товаров в корзину: 21.0 млн * 4 / 86400 = 972 RPS
* Оформление заказов: 21.0 млн. * 1 / 86400 = 243 RPS
* Трэккинг посылок: 21.0 млн. * 1 / 86400 = 243
* Добавление товаров продавцом: 21.0 млн. * 1 / 86400 = 243 RPS

Действие                            | RPS  | Пиковое значение | Пиковое значение с коэффициентом запаса 2 |
------------------------------------|------|------------------|-------------------------------------------|
Поиск товаров                       | 729  | 2187             | 2916                                      |
Добавление товаров в корзину        | 972  | 2916             | 3888                                      |
Оформление заказов                  | 243  | 729              | 972                                       |
Оставление отзывов                  | 243  | 729              | 972                                       |
Добавление товаров продавцом        | 243  | 729              | 972                                       |
**Итого**                           | 2430 | 7290             | 9720                                      | 



# Список источников

1. https://pro.similarweb.com/#/digitalsuite/websiteanalysis/overview/website-performance/*/999/1m?webSource=Total&key=ozon.ru
2. https://oborot.ru/news/kolichestvo-posetitelej-marketplejsov-wildberries-i-ozon-v-mesyac-sravnyalos-kuda-eshhe-hodyat-pokupateli-i209527.html
3. https://adindex.ru/news/researches/2023/02/28/310879.phtml
4. https://dzen.ru/a/ZkT8wKCKkBgtJMT-
5. https://oborot.ru/news/oborot-sellerov-na-ozon-vyros-v-23-raza-skolko-u-marketplejsa-vyruchki-prodavcov-pokupatelej-i-zakazov-na-nachalo-2024-goda-i211081.html
6. https://seller.ozon.ru/media/boost/kak-izmenilsya-biznes-portret-prodavca-ozon-v-2023-godu/